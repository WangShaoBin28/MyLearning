# SSL 证书的选择

这是一个尔虞我诈，欺骗盛行的时代，保护别人也为了保护自己，至少需要一张SSL证书

SSL证书是PKI的一部分，说白了就是大家共同遵守的一套游戏规则，且这个游戏有所谓德高望重——在真实世界中有着较高金融信用评级（真的吗？）——的机构（CA）在其中主持公道

从技术上讲，我们自己也可以生成CA证书，自己来签发自己，然后还可以签发别人生成的CSR，但是，谁会鸟你呢？毕竟各个系统中内置的都是大佬们的证书，并以此构成的现实世界中的信任链

# 分类

## 按商业类型分类

DV、OV、EV

其中DV就叫做Domain Validated，意思就是证书的颁发机构只验证对应的域名，这么看起来管理非常送，所以有好多白送的，但是由于也是合法CA签发的，非常适合个（穷）人使用

OV就是Organization Validated，意思明显就是还得验证一下你这机构和域名是不是一家子的，毕竟域名抢注的情况不少，这时候证书内还会记录公司的信息，当然不能瞎填，刚说了珍视自己名誉的CA是会来背书的

EV就是最装B的一个玩意儿了，经常看到的浏览器地址栏会显示公司名称就是这种，当然人家大佬为你背书，一方面人家确实审核签发过程严格一点（也就是流程繁琐一点），同时收费也会更高一点

OV和EV都会送一份保险，因为假设CA的私钥被盗了，或者怎么的总之让人冒名了，那么买symantec的话最高有一张证书170w美刀的保险

## 按业务类型分类

那就是单域名、多域名、泛域名（通配符）之间的区别了，其实呢主要在于部署更新的方便性问题，自然泛域名最省事，但也不是完全免维护，这个还是按需来判断更好

# CA（证书签发机构）

基本上90%都是Symantec、GeoTrust、Digicert、IdenTrust、Godday、Comodo这些货色的天下，其中前三个认为是一家也没问题，基本上就是华硕和华擎这类品牌之间的关系

另外有几个国货：
+ 一个是AsiaTrust，是老牌代理商亚数信息自己搞得
+ 臭遍街的WoSign，属红衣教主的360一系（曾经错发了github.com的3721精神续作之一）
+ 央妈牵头的CFCA

Symantec一系国内都有代理商，阿里云上也可以直接买，所以深处天朝而曾经万千瞩目的“发票”问题应该已经不成问题

# 误区

## PKI的安全问题

上面提到沃通WoSign的典故，实属PKI中CA体系薄弱一环，互联网界的一哥G记牵头搞了一个RFC，旨在约束和强化CA行为，详见[参考1](https://www.certificate-transparency.org/)，[参考2](https://imququ.com/post/certificate-transparency.html)

## DV会过时？

如果说DV在验证上有漏洞，那也是上述PKI安全问题中，CA的不作为（或桌子底下的行为）造成的，严格的单域名自助验证DV安全性从逻辑上看并不比线下校验差，而且如果教育了用户，DV就是没有认证过组织真实性的证书，是不是比在不知情的情况下用个类似3721精神续作的证书更让人踏实一点呢？

# 如果明天就要一证书？

SSL证书问题牵扯到似是而非概念也非常的多，仅仅SSL证书的配置并不能确定网站和网站的用户已经收到的应有的保护，更重要的是正确的服务器配置，密切留意各类小CA的行为等等

无论如何，是要开启的HTTPS的，如果是公司行为，此时至少应该选择一款国际品牌，还得能代开发票，可以考虑这款：

https://common-buy.aliyun.com/?spm=5176.2020520163.cas.1.60b32b7a0PN4CL&commodityCode=cas#/buy

# 如果今天就要一张证书？

如果是个人除了各个云主机服务商的免费DV通道，也可以考虑这里的

https://freessl.org/

其中let's encrypt免费续签的概念也很值得玩味一番的，如果说选择Symantec是看重其Virgin前身兼容老旧设备等等等等原因，那么使用Let’s Encrypt已经可以兼容目前绝大多数的新型客户端的了（升级到java 8吧至少）

关于Let's Encrypt的[参考](https://orchidflower.gitee.io/2017/07/02/How-to-use-Let-s-Encrypt/)
