<!--

$theme: gaia
template: invert
$size: 16:9
page_number: true


-->

<font face="微软雅黑">

## PaaS平台选型（灵雀、时速、DaoCloud、Rancher、普元）

+ 选用PaaS层产品的目的
+ 候选方案
+ 评估的标准
+ 具体评估及结论

***

## 选用PaaS层产品的目的

+ 根本的原因
+ 具体的用途
+ 现实的切入点

***

### 根本的原因

明确的选用一个PaaS平台产品，或者PaaS层解决方案，能够对高效率、低门槛的 ***开发*** 和 ***交付*** SaaS服务产品提供必要的帮助

因为严格的来说，一个SaaS层产品要么：

+ 有意识地选择了一组PaaS产品功能来使用，或者
+ 不自觉地重写或者设计实现了大部分PaaS层产品的功能

<font face="楷体">即，软件开发过程不存在跨越卡夫丁峡谷的概念——从I层直接到S层，这是没有的事情；即便不愿意承认，最低限度也会有一个不成熟的粗糙的P层存在于现实的技术栈之中</font>

***

### 具体的用途

+ 开发
  - 简化应用服务的设计难度
  - 强化应用服务的设计质量
  - 持续集成（保证实现的质量）

+ 交付
  - 部署流水线（俗称持续发布，强化实施的质量） 
  - 简化非应用服务部分基础设施的部署和维护
  - 蓝绿上线、弹性伸缩

***

### 现实的切入点

PaaS平台产品发展有一个分水岭，2014年开始涌现了一大批容器和容器编排技术为核心的PaaS平台创业公司，试图颠覆传统由Cloud Foundry和Openshift等大公司背景产品把持的市场格局；2017年基于容器的服务编排的基础框架之争尘埃落定，kubernetes（以下简写k8s）成为事实标准，无论新兴和传统的老牌厂商均开始围绕k8s为基础建设或重构自己的PaaS产品线，描述和DevOps相关的产品故事

因此无可争议的，我们为了构建我们自身的SaaS平台，保持和时代同步的节奏，以建设k8s集群为切入点是最为现实的选择


***

### 候选方案 - 一阶段对比厂商

+ [灵雀云](http://www.alauda.cn/about/index.html)
  - 成立于2014年，总部位于北京
  - [B+ 轮，披露总融资额3.38亿人民币](https://www.itjuzi.com/company/14241)
 
+ [时速云](https://www.tenxcloud.com/aboutus.html?aboutus)

  - 成立于 2014 年 10 月，总部位于北京
  - [B 轮，披露的总融资额6300万人民币](https://www.itjuzi.com/company/16194)

***

### 候选方案 - 二阶段对比厂商

+ [Rancher](https://rancher.com/)
  - 成立于 2014 年 9月，总部位于湾区，产品开源
  - [B 轮，披露的总融资额 $30 million](https://www.crunchbase.com/organization/rancher-labs#/entity)
+ [DaoCloud](https://www.daocloud.io/)
  - 成立于 2014 年，总部位于上海
  - [B 轮，披露的总融资额4.85亿人民币](https://www.itjuzi.com/company/17231)
+ [普元](http://www.primeton.com/)
  - 成立于 2003年，总部位于上海，和其他几家略微不同，普元不是容器创业公司，据其自身介绍计划明年IPO

***

### 备选方案

+ 自维护
  - 线上k8s基础设施可依托I层服务产品，线下k8s（利用社区维护的工具）自建自维
  - 结合构建在k8s基础之上的管理平台
    - 选用如OpenShift或Rancher开源版来降低部署实施难度和解决账户权限控制问题
  - CI/CD 基于其他开源软件组合自己设计方案
  
***

## 先给结论

为了一个更顺畅地起步，并且由于在k8s专业技术能力方面的优势，选择一款有商业支持的产品比较有利

从整体的成熟度和核心k8s功能衔接等技术角度上看，Rancher是相对较优的选择

***
<font size=6>
  
## 各厂商及产品优缺点概述 - 灵雀

+ 优点
  + 云端托管，可以进一步减少我们自身资源消耗占用，并方便灵雀一方实施维护升级
  + 相对Rancher或原生k8s的技术性没那么强，界面可认为更符合国人习惯
  + 其团队特别是管理团队水平应当相当不错，但这更多是通过其在资本市场较好表现倒推出来得

+ 缺点
  + 云端托管从另一方面来讲也有劣势，对单一客户定制会是局限
  + CI/CD方面着墨很多，但表现普通，关键能力裁剪
  + 接触的支持团队工程师技术尚可，但整体感觉其服务积极性不高

</font>

*** 

## 各厂商及产品优缺点概述 - 时速

+ 优点
  + 同灵雀，其产品相对Rancher或原生k8s的技术性没那么强，界面更符合国人习惯，界面设计相对灵雀更有层次感
  + 售前支持积极性较好，支持团队的老大经常亲自压阵解决问题，反应出对我们的重视，当然可能要暴露其团队整体能力的欠缺

+ 缺点
  + 同灵雀，产品试图隐去k8s复杂性，但效果不佳
  + 产品在试用过程中直接表现出bug和功能不完备，反映了其内部发版策略可能存在问题
  + CI/CD方面表现普通，略好于灵雀，界面表现稍好一点


***

<font size=6>

## 各厂商及产品优缺点概述 - Rancher

+ 优点
  + 产品开源，免费使用；产品迭代计划和架构设计公开
  + 除去商业支持，还有社区支持
  + 明确的聚焦于k8s集群的管理，不忌讳暴露任何k8s的概念，紧贴社区
  + 初步看其支持工程师实力还是比较强的，解决问题思路清晰

+ 缺点
  + 界面UI上确实很不一样，打个比方就是亚马逊和京东天猫的区别，确实很别扭
  + 私有化gitlab支持201809月底才正式发版，CI/CD方面同样比较普通
  + 学习曲线较裸k8s较缓，相对其他国内竞品较陡

</font>

***

## 各厂商及产品优缺点概述 - DaoCloud

+ 优点
  + CI/CD和容器平台明确分为两个产品，说明其对DevOps方面一个基本的理解力
  + 和时速灵雀等厂商相同，界面符合国人审美和操作习惯

+ 缺点
  + CI/CD虽然独立，但是也裁剪一些基础设施本身就有得功能，如不定制，很有可能不具备足够的灵活性
  + 分离的产品就失去了统一界面的优势，据称有单点登陆解决方案，未验证

***

## 各厂商及产品优缺点概述 - 普元

+ 优点
  + CI/CD能力全面和丰富，能输出完整的devOps方法论
  + 和时速灵雀等厂商相同，界面符合国人审美和操作习惯

+ 缺点
  + 容器平台及k8s能力方面起步较晚，不是其主推产品
  + 据了解其容器平台没有经过CNCF的kubernetes兼容性认证（其他家均获[认证](https://www.cncf.io/certification/software-conformance/)）

***

|对比项|灵雀|时速|Rancher|DaoCloud|普元|自维
|:--|:-:|:-:|:-:|:-:|:-:|:-:|
|k8s衔接能力|3|3|4|2|1|3
|认证与权限管理|3|2|4|2|2|2
|CI能力|2|2|1|3|4|3
|CD能力|3|3|3|3|2|3
|商业支持品质预估|2|2|4|3|3|0
|总分|13|12|16|13|12|11


<small> *注：自维护还需要结合I层和Rancher开源产品能力*</small>

***

### 评分说明

* 每一项总分5分
* 起评就是3，否则就不值得出来卖钱了
+ 自维护部分更多的来自于预期评估或者说 **自信心**，也就是我相信我们可以
+ 自维方案是按架构运维组之前计划再补充一个人来和现有整个研发团队配合做这些事情来考量得

下面逐一概述每一项增减依据：

***

#### k8s衔接方面：

- Rancher集成边界概念清晰明确，+1
- DaoCloud同时管理多集群繁琐-1
- 普元自身也承认自己这方面不具备明显优势-2
- 自维是考虑没有吃透开源Rancher能力故保持基准
- 灵雀和时速方面中规中矩，不加不减


***

#### 权限方面：

- 时速-1在于仅能对接LDAP
- Rancher集成能力和扩展能力更好，其售前也明确说明了其产品这方面相对k8s得改进，+1
- DaoCloud和普元因为分开多个产品必然罗嗦-1
- 自维在Rancher开源掌握程度上-1，在此之上考虑CI用其他开源产品会降低这方面易用性再-1
- 灵雀属于中规中矩，没什么特点，维持基本分

***

#### CI能力

+ Rancher CI能力仅仅是有，和私有gitlab对接的功能还未发版，所以-2
+ 灵雀和时速属于典型的希望以k8s为依托渗透DevOps领域的公司，这方面都表现出了专业背景上得差距，时速自身甚至在试用过程中暴露了其内部CI流程一定有问题，但是证据并不充分因此都 -1
+ DaoCloud将CI能力独立出来，说明其视角高度和灵雀时速完全不同，但是没有来得及深度试用，并且其售前支持在一个常见细节上没有当场给出答案，因此不宜过分给高分
+ 普元CI能力确实更胜一筹，专精多年 +1
+ 自维通过组合开源方案，有信心达到平均水平

***

#### CD能力

+ 灵雀和时速拜k8s所赐，不加不减
+ Rancher在这方面有其独特得概念，但是没有试用到足够深度，因此不宜给更高分
+ DaoCloud在DCS和DCE平台上都有这个能力，因为没有试用，不了解这块结合部处理的有没有特别亮点，看演示是具备基本能力的，维持基础分
+ 普元因为k8s不是重点，所以考虑其这方面适应性会稍显老迈一点
+ 自维相信只要能调动k8s基本能力，可以达到平均水平

***

#### 商业支持品质预估

+ 灵雀态度让他们失分了
+ 时速水平让他们失分了
+ Rancher得益于接触的工程师表现出的实力加分了
+ DaoCloud没有接触过多，但是他们是唯一来了两位工程师来做讲解的，说明重视度不错，或者对方内部分工更专业（CI/CD和k8s），从其工程师得表述上看，应当不低于平均水平，值得至少拥有基准分
+ 普元是老牌厂商，我个人订阅其公众号技术分享文章，相信其内部确实有有深度的人，来讲解的工程师对k8s虽然不专精，但是DevOps领域得认识高度达到了业界平均水平，因此值得给出基准分
+ 自维方面，只能全靠自己

***

## 产品构成进一步得细节评估

更细致评估展开比较冗长，包含更多技术细节，灵雀和时速的详细情况可见[这里](https://github.com/leizhnxp/learning/wiki/k8s-PaaS-compare-slide-CICD)，限于时间和试用深度，后三家不能立即给出更进一步得深入总结

下面是综合Rancher、DaoCloud、普元之后的大致整体概况

***

<font size=6>

### 针对k8s+CI/CD的评估 1

+ k8s方面
  - k8s本身的升级维护方面，各家产品为了自身的稳定，都会锁定一个版本，本身也不会频繁升级
  - 普元作为传统PaaS厂商起步较晚，其产品线在这方面纯粹是战略防守的形态，也是为其DevOps产品服务的
  - 所有的商业产品有明显的起步（安装k8s也有点门槛）和潜在的维护升级的优势，但是Rancher开源版在这方面一下子拉低了安装这个门槛
  - 同时Rancher实际上明确专注于k8s集群管理，积极拥抱k8s生态，而不是试图把k8s封装起来卖一些似是而非的概念（k8s背后有Google Borg论文做坚实的理论支撑，在行业内公认非常具有前瞻性和完备性）
  - 所以综合起来看Rancher在k8s方面显得比较独特

***

### 针对k8s+CI/CD的评估 2

+ CI/CD
  - 灵雀和时速都是试图在这方面使自身对k8s的封装做出差异化，但二者对CI的理解非常粗浅和普元这样稍老一些得厂商比起来几乎就已经不值一提了，CD拜k8s基础能力之福，没有其更多的自身优势
  - DaoCloud由于其创始团队的特点，产品形态一直是将这块独立出来的，有别于时速和灵雀；但是从现阶段具体产品上整体没有体现出足够的优势，其整个产品线，在k8s和CI/CD（devOps）上显得摇摆不定，哪一方面的优势都不明显
  - Rancher自身在CI方面是防守形态的，跟灵雀和时速比都有差距，CD方面由于k8s的关系，还是能达到平均水平得，在于使用者如何运用
  - 普元在CI这方面有绝对的优势，但CD侧因为其k8s方面得暗淡相对其他几家过于弱势（自己也强调并非主推产品，同时没有CNCF的认证）

</font>

***

### k8s和CI/CD哪一个更重要

+ 虽然k8s只是个工具，但是相比较起来也更重要，值得优先作为切入点
+ k8s之前，CI/CD特别是CD方面有很多问题处理起来都非常困难，容器时代及k8s出现让这些目标都从框架上得到了一个基本的支撑
+ 一旦深刻掌握了k8s，是可以认为这是一颗Frederick P. Brooks口中的[银弹](https://zh.wikipedia.org/wiki/%E6%B2%A1%E6%9C%89%E9%93%B6%E5%BC%B9)
+ 这可能也是为什么灵雀和时速这些CI这么烂得产品也能和普元或者具备传统PaaS背景的DaoCloud同场竞技的原因
+ Rancher在这里面显得非常独特，他专注于解决k8s自身易用性的问题，实际上相当于把CI/CD的具体实施选择权进一步交还出去，让使用PaaS平台的用户根据自己的特点来决定多大程度上利用k8s的能力处理CI/CD的问题，回归了DevOps本质

***

## 结论

+ 这里对比的商业产品确实有他们的优势，但没有他们自身吹嘘的那么天花乱坠，由于k8s核心技术和参考文献都是公开的（虽然k8s学习曲线还是比较陡峭的），非自维得方案绝对的优势都是在于其能提供的商业技术支持得力度
+ 从纯技术角度来看，在起步阶段（18个月之内），购买 <span style="background-color:black;"> ***Rancher*** </span>的服务，应该能够比自维护更有效的提升这个时期的投入产出比
+ 非常有必要<span style="background-color:black;">持续得投入力量</span>深化整个技术团队对k8s理解和运用能力，同时也可以考虑在度过起步磨合期之后，重新审视自身的具体问题，有针对性的购买更专业的DevOps解决方案咨询服务
