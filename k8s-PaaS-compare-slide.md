<!--

$theme: gaia
template: invert
$size: 16:9
page_number: true


-->

<font face="微软雅黑">

## PaaS平台选型（灵雀、时速、自维护比较）

+ 选用PaaS层产品的目的
+ 候选方案
+ 评估的标准
+ 具体评估及结论

***

## 选用PaaS层产品的目的

+ 根本的原因
+ 具体的用途

***

### 根本的原因

明确的选用一个PaaS平台产品，或者PaaS层解决方案，能够对高效率、低门槛的 ***开发*** 和 ***交付*** SaaS服务产品提供必要的帮助

因为严格的来说，一个SaaS层产品要么：

+ 有意识地选择了一组PaaS产品功能来使用，或者
+ 不自觉地重写或者设计实现了大部分PaaS层产品的功能

<font face="楷体">即，软件开发过程不存在跨越卡夫丁峡谷的概念——从I层直接到S层，这是没有的事情；即便不愿意承认，最低限度也会有一个不成熟的粗糙的P层存在于现实的技术栈之中</font>

***

### 具体的用途

+ 开发
  - 简化应用服务的设计难度
  - 强化应用服务的设计质量
  - 持续集成（保证实现的质量）

+ 交付
  - 部署流水线（俗称持续发布，强化实施的质量） 
  - 简化非应用服务部分基础设施的部署和维护
  - 蓝绿上线、弹性伸缩

***

### 候选方案

+ [灵雀云](http://www.alauda.cn/about/index.html)
  - 成立于2014年
  - [B+ 轮，披露总融资额3.38亿人民币](https://www.itjuzi.com/company/14241)
 
+ [时速云](https://www.tenxcloud.com/aboutus.html?aboutus)

  - 成立于 2014 年 10 月
  - [B 轮，披露的总融资额6300万人民币](https://www.itjuzi.com/company/16194)

+ 自维护
  - 线上k8s基础设施依托I层容器服务，线下k8s纯自维
  - CI/CD 基于开源软件组合自己设计方案
  
***

## 先给结论

为了一个更顺畅地起步，并且由于在起步阶段在安装维护k8s，权限认证方面的明显优势，需要选择一款商业产品，从整体的成熟度和核心k8s功能保留上看，灵雀是相对时速较优的选择

但是：
 + 尽量少对其产生依赖（不围绕它设计过于复杂的解决方案）
 + 并从<span style="background-color:black;">长远考虑</span>，设计自维护或尝试寻找更成熟的PaaS解决方案供应商

***

|对比项|灵雀|时速|自维护 - 容器|自维护 - 非容器 |
|:--|:-:|:-:|:-:|:-:
|k8s维护便捷性|6|6|2|10
|认证与权限管理|7|6|2|2
|CI能力|5|5|6|4
|CD能力|5|5|6|1
|成熟度（12 factor）|4|3|6|4
|收益/成本（起步阶段）|6|5|4|3
|总分|33|30|26|24

<small> *注：自维护均需要结合层能力*</small>

***

### 评分说明

+ 每一项总分10分，所以自维护非容器那个意外拿了个满分
+ 自维护部分更多的来自于预期评估或者说 **自信心**，也就是我相信我们可以，前提是还需要一个人来专职和现有团队配合做这些事情
+ 收益/成本的评估比较主观和模糊，来源于直接和间接支出的人力和时间成本的拍脑袋估算
  - 比如发生问题寻求客服帮助，包括查手册、IRC、电话、邮件、等待support人员到场和处理的时间等等
  - 再比如说需要补充的人员的预计的成本，一个有着足够经验的工程师，应该最低月薪25k左右，也就是雇佣总成本在45w/y以上，但是找到他花费的时间成本会比较高

***


## 形成该评分的评估参考

要点：在于候选方案多大程度上能够满足实际开发过程的具体需要

这里主要从两方面来考察：

+ 表象的：按构成产品功能组来进行评估
+ 细节的：通过SaaS层建设要处理的基本问题进行评估

除此之外还有另一个要考虑的重要维度

+ 需要投入的直接的人力和时间成本

***

## 具体评估

- 按产品构成
- 按设计视角

***

## 产品构成

+ 灵雀和时速都是前些年炒作的CaaS概念的产物
+ 它是相对于传统PaaS来说的，特点是基于容器和容器编排来处理CI/CD问题
+ 基本的容器编排选型都是kubernetes（以下简称k8s）
+ 产品的基本形态都是k8s + （运作在k8s之上的）CI/CD功能

展开评估比较冗长，包含一些技术细节，可见[这里](https://github.com/leizhnxp/learning/wiki/k8s-PaaS-compare-slide-CICD)，下面是简单的结论

***

### 针对k8s+CI/CD的评估


+ k8s方面，商业产品有明显的起步（安装k8s也有点门槛）和潜在的维护升级的优势
+ CI/CD方面，和自维护方案没有明显区别，甚至它们对这方面的理解会落后于他们的客户团队，这也就是所谓他们要定制开发的地方
+ 商业产品在认证和授权功能方面较有优势，他们基于其统一的产品聚合了授权设置功能


***

## 按设计视角进行评估

+ 从PaaS产品或解决方案的目的出发——解决SaaS研发的问题
+ 那么SaaS服务设计都有哪些要注意的问题——12 factor准则


***

### 12 Factor准则是什么

+ 是被业界广泛接受并认可的一系列SaaS应用设计的启发式设计指导
+ 由于这份guidelines的目的和PaaS平台的目的相同，因此可以作为PaaS产品或解决方案成熟程度的分析依据之一
+ 12 Factor [文本](https://12factor.net/zh_cn/)，[原文](https://12factor.net/)

***

### 12 Factor评估的结论

展开分析也非常冗长，而且太多技术细节，具体看[这里](https://github.com/leizhnxp/learning/wiki/PaaS-product-notes#%E5%B9%B3%E5%8F%B0%E8%83%BD%E5%A4%9F%E6%94%AF%E6%8C%8112-factor%E5%8E%9F%E5%88%99%E7%9A%84%E7%A8%8B%E5%BA%A6)

这里只说一组简单的结论：

+ 灵雀和时速的覆盖面基本足够，但成熟度都不足够好
+ 在一些解决方案的供给上，完全比不上去直接依赖一个I层供应商阿里云

***

## 整体功能和服务评估

+ 灵雀和时速都是及格的PaaS平台解决方案起步的供应商
+ 但产品都缺乏深度，是否是最终理想的解决方案，是应当持怀疑态度的
  - 在细节支持上，试用阶段，时速的support团队比灵雀方面的跟进响应速度和效果相对更好
+ 从产品功能上，灵雀整体上看比时速更成熟一点，主要是k8s的能力保留上

***

## 结论

+ 这里对比的商业产品确实有他们的优势，但没有他们自身吹嘘的那么明显，主要是k8s的安装维护和权限管理上
+ 在起步阶段（18个月之内），购买 ***灵雀*** 的产品，应该能够比自维护更有效的提升这个时期的投入产出比
+ 选择灵雀主要由于其产品整体显得更成熟（但优势不明显），同时考虑了资本市场对其团队的评估；
+ 由于其许可的按时付费性质，所以需要在实际使用的过程当中更进一步考察灵雀支撑服务团队的水平和综合的解决方案支持能力
+ 有必要谨慎的围绕它来构建复杂方案去解决具体的问题；后续，<span style="background-color:black;">需要考虑持续投入力量</span>形成自维护解决方案或者寻找更成熟的供应商
